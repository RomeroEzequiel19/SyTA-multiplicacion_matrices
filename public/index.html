<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multiplicación de Matrices</title>
    <style>
      table {
        border-collapse: collapse;
      }

      table,
      th,
      td {
        border: 1px solid black;
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <h1>Ingrese la cantidad de filas y columnas de las matrices</h1>
    <label for="filasMatriz1">Filas Matriz 1:</label>
    <input type="number" id="filasMatriz1" name="filasMatriz1" />
    <label for="columnasMatriz1">Columnas Matriz 1:</label>
    <input type="number" id="columnasMatriz1" name="columnasMatriz1" />
    <br />
    <label for="filasMatriz2">Filas Matriz 2:</label>
    <input type="number" id="filasMatriz2" name="filasMatriz2" />
    <label for="columnasMatriz2">Columnas Matriz 2:</label>
    <input type="number" id="columnasMatriz2" name="columnasMatriz2" />
    <br />
    <button onclick="generarMatrices()">Generar Matrices</button>

    <div id="matrices" style="display: none">
      <h2>Matriz 1:</h2>
      <div id="matriz1"></div>
      <h2>Matriz 2:</h2>
      <div id="matriz2"></div>
    </div>

    <button onclick="multiplicarMatrices()">Multiplicar</button>

    <div id="resultado" style="display: none">
      <h2>Resultado de la multiplicación:</h2>
      <div id="resultadoMatriz">
        <h1>Hola</h1>
      </div>
    </div>

    <script>
      function generarMatriz(filas, columnas, id) {
        const matriz = [];
        const contenedor = document.getElementById(id);
        contenedor.innerHTML = "";
        for (let i = 0; i < filas; i++) {
          const fila = [];
          for (let j = 0; j < columnas; j++) {
            const input = document.createElement("input");
            input.type = "number";
            input.id = `${id}${i}${j}`;
            input.name = `${id}${i}${j}`;
            contenedor.appendChild(input);
            fila.push(input);
          }
          matriz.push(fila);
          contenedor.appendChild(document.createElement("br"));
        }
        return matriz;
      }

      function mostrarMatriz(idContenedor, matriz) {
        const contenedor = document.getElementById(idContenedor);
        contenedor.innerHTML = "";
        for (let i = 0; i < matriz.length; i++) {
          for (let j = 0; j < matriz[i].length; j++) {
            contenedor.appendChild(matriz[i][j]);
            contenedor.innerHTML += " ";
          }
          contenedor.innerHTML += "<br>";
        }
      }

      function generarMatrices() {
        const filasMatriz1 = parseInt(
          document.getElementById("filasMatriz1").value
        );
        const columnasMatriz1 = parseInt(
          document.getElementById("columnasMatriz1").value
        );
        const filasMatriz2 = parseInt(
          document.getElementById("filasMatriz2").value
        );
        const columnasMatriz2 = parseInt(
          document.getElementById("columnasMatriz2").value
        );

        if (
          isNaN(filasMatriz1) ||
          isNaN(columnasMatriz1) ||
          isNaN(filasMatriz2) ||
          isNaN(columnasMatriz2)
        ) {
          alert(
            "Por favor ingrese valores numéricos válidos para las filas y columnas."
          );
          return;
        }

        generarMatriz(filasMatriz1, columnasMatriz1, "matriz1");
        generarMatriz(filasMatriz2, columnasMatriz2, "matriz2");

        document.getElementById("matrices").style.display = "block";
        document.getElementById("resultado").style.display = "none";
      }

      function obtenerMatriz(id) {
        const matriz = [];
        const filas = document.querySelectorAll(`#${id} input`).length;
        const columnas = document.querySelectorAll(
          `#${id} input:first-child`
        ).length;
        for (let i = 0; i < filas; i++) {
          const fila = [];
          for (let j = 0; j < columnas; j++) {
            fila.push(
              parseFloat(document.getElementById(`${id}${i}${j}`).value)
            );
          }
          matriz.push(fila);
        }
        return matriz;
      }

      function multiplicarMatrices() {
        const matriz1 = obtenerMatriz("matriz1");
        const matriz2 = obtenerMatriz("matriz2");

        const columnasMatriz1 = matriz1[0].length;
        const filasMatriz2 = matriz2.length;
        if (columnasMatriz1 !== filasMatriz2) {
          alert(
            "El número de columnas de la primera matriz debe ser igual al número de filas de la segunda matriz."
          );
          return;
        }

        const resultado = multiplicar(matriz1, matriz2);
        mostrarMatrizResultado(resultado);
      }

      function multiplicar(matriz1, matriz2) {
        const filasMatriz1 = matriz1.length;
        const columnasMatriz1 = matriz1[0].length;
        const columnasMatriz2 = matriz2[0].length;
        const resultado = [];
        for (let i = 0; i < filasMatriz1; i++) {
          resultado[i] = [];
          for (let j = 0; j < columnasMatriz2; j++) {
            let sum = 0;
            for (let k = 0; k < columnasMatriz1; k++) {
              sum += matriz1[i][k] * matriz2[k][j];
            }
            resultado[i][j] = sum;
          }
        }
        return resultado;
      }

      function mostrarMatrizResultado(matrizResultado) {
        const resultadoDiv = document.getElementById("resultadoMatriz");
        resultadoDiv.innerHTML = "";
        const table = document.createElement("table");
        for (let i = 0; i < matrizResultado.length; i++) {
          const row = document.createElement("tr");
          for (let j = 0; j < matrizResultado[i].length; j++) {
            const cell = document.createElement("td");
            cell.textContent = matrizResultado[i][j];
            row.appendChild(cell);
          }
          table.appendChild(row);
        }
        resultadoDiv.appendChild(table);
        document.getElementById("resultado").style.display = "block";
      }
    </script>
  </body>
</html>
